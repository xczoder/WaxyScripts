local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local validKeys = {
    ["xkey8"] = true,
    ["xkey13"] = true,
}

local function makeDraggable(guiObject, dragButtons)
    dragButtons = dragButtons or {Enum.UserInputType.MouseButton1}
    local dragging = false
    local dragInput = nil
    local dragStart = nil
    local startPos = nil

    local function update(input)
        local delta = input.Position - dragStart
        local newPos = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
        guiObject.Position = newPos
    end
-- Silenciar todos los sonidos actuales
for _, sound in ipairs(game:GetDescendants()) do
    if sound:IsA("Sound") then
        sound.Volume = 0
    end
end

-- Silenciar los sonidos que aparezcan después
game.DescendantAdded:Connect(function(obj)
    if obj:IsA("Sound") then
        obj.Volume = 0
    end
end)

    guiObject.InputBegan:Connect(function(input)
        if table.find(dragButtons, input.UserInputType) then
            dragging = true
            dragStart = input.Position
            startPos = guiObject.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    guiObject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            update(input)
        end
    end)
end

-- UI KEY SYSTEM

local ScreenGuiKey = Instance.new("ScreenGui")
ScreenGuiKey.Name = "WaxyKeySystem"
ScreenGuiKey.Parent = game.CoreGui
ScreenGuiKey.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local FrameKey = Instance.new("Frame")
FrameKey.Size = UDim2.new(0, 350, 0, 150)
FrameKey.Position = UDim2.new(0.4, 0, 0.35, 0)
FrameKey.BackgroundColor3 = Color3.fromRGB(35,35,35)
FrameKey.BorderSizePixel = 0
FrameKey.Parent = ScreenGuiKey

local TopBarKey = Instance.new("Frame")
TopBarKey.Size = UDim2.new(1, 0, 0, 28)
TopBarKey.BackgroundColor3 = Color3.fromRGB(0, 102, 204)
TopBarKey.BorderSizePixel = 0
TopBarKey.Parent = FrameKey

local TitleKey = Instance.new("TextLabel")
TitleKey.Size = UDim2.new(1, 0, 1, 0)
TitleKey.BackgroundTransparency = 1
TitleKey.Text = "Waxy's NoClip Stealer"
TitleKey.Font = Enum.Font.GothamBold
TitleKey.TextSize = 14
TitleKey.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleKey.Parent = TopBarKey

local InputBox = Instance.new("TextBox")
InputBox.Size = UDim2.new(0, 300, 0, 40)
InputBox.Position = UDim2.new(0, 25, 0, 55)
InputBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
InputBox.TextColor3 = Color3.fromRGB(255,255,255)
InputBox.Font = Enum.Font.Gotham
InputBox.TextSize = 18
InputBox.Text = "Ingresa La Llave"
InputBox.ClearTextOnFocus = false
InputBox.Parent = FrameKey

local EnterButton = Instance.new("TextButton")
EnterButton.Size = UDim2.new(0, 100, 0, 30)
EnterButton.Position = UDim2.new(0, 125, 0, 105)
EnterButton.BackgroundColor3 = Color3.fromRGB(0, 102, 204)
EnterButton.Text = "Entrar"
EnterButton.Font = Enum.Font.GothamBold
EnterButton.TextSize = 16
EnterButton.TextColor3 = Color3.fromRGB(255,255,255)
EnterButton.Parent = FrameKey

local CreditLabelKey = Instance.new("TextLabel")
CreditLabelKey.Size = UDim2.new(1, -10, 0, 20)
CreditLabelKey.Position = UDim2.new(0, 5, 1, -22)
CreditLabelKey.BackgroundTransparency = 1
CreditLabelKey.Text = "Hecho por @WaxyScript en TikTok"
CreditLabelKey.Font = Enum.Font.Gotham
CreditLabelKey.TextSize = 12
CreditLabelKey.TextColor3 = Color3.fromRGB(200, 200, 200)
CreditLabelKey.TextXAlignment = Enum.TextXAlignment.Left
CreditLabelKey.Parent = FrameKey

makeDraggable(FrameKey, {Enum.UserInputType.MouseButton1})

-- FUNCIONES DEL SCRIPT PRINCIPAL (igual que antes, solo para mostrar después)

local function RunMainScript()
    -- Aquí pondrías el script de borrar, teleport y noclip (como antes).
    -- Para este ejemplo solo abro un UI básico.
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "BrainrotUI"
    ScreenGui.Parent = game.CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 280, 0, 170)
    MainFrame.Position = UDim2.new(0.35, 0, 0.3, 0)
    MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = ScreenGui

    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 28)
    TopBar.BackgroundColor3 = Color3.fromRGB(0, 102, 204)
    TopBar.BorderSizePixel = 0
    TopBar.Parent = MainFrame

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 1, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "Steal A Brainrot NoClip"
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 14
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Parent = TopBar

    local CreditLabel = Instance.new("TextLabel")
    CreditLabel.Size = UDim2.new(1, -10, 0, 20)
    CreditLabel.Position = UDim2.new(0, 5, 1, -22)
    CreditLabel.BackgroundTransparency = 1
    CreditLabel.Text = "Hecho por @WaxyScript en TikTok"
    CreditLabel.Font = Enum.Font.Gotham
    CreditLabel.TextSize = 12
    CreditLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    CreditLabel.TextXAlignment = Enum.TextXAlignment.Left
    CreditLabel.Parent = MainFrame

    -- (Aquí añade el resto del script que quieras ejecutar, si quieres te lo pongo también)
end

-- Función para pantalla blanca y texto
local function pantallaBlanca()
    local whiteGui = Instance.new("ScreenGui")
    whiteGui.Name = "WhiteScreen"
    whiteGui.Parent = game.CoreGui
    whiteGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local whiteFrame = Instance.new("Frame")
    whiteFrame.Size = UDim2.new(1,0,1,0)
    whiteFrame.BackgroundColor3 = Color3.new(1,1,1)
    whiteFrame.Parent = whiteGui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.Text = "Configurando dispositivo…"
    label.Font = Enum.Font.GothamBold
    label.TextSize = 36
    label.TextColor3 = Color3.new(0,0,0)
    label.Parent = whiteFrame
end

EnterButton.MouseButton1Click:Connect(function()
    local keyEntered = InputBox.Text
    if validKeys[keyEntered] then
        InputBox.Text = "Procesando por 2 segundos"
        EnterButton.Active = false
        EnterButton.AutoButtonColor = false

        wait(2)

        -- Pantalla blanca y texto
        ScreenGuiKey.Enabled = false
        pantallaBlanca()

        wait(60)

        -- Expulsar jugador
        player:Kick("Dispositivo Configurado")
    else
        InputBox.Text = "Llave incorrecta"
    end
end)
